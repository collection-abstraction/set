<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <base data-ice="baseUrl" href="../../">
  <title data-ice="title">src/_Set.js | @collection-abstraction/set</title>
  <link type="text/css" rel="stylesheet" href="css/style.css">
  <link type="text/css" rel="stylesheet" href="css/prettify-tomorrow.css">
  <script src="script/prettify/prettify.js"></script>
  <script src="script/manual.js"></script>
<link rel="stylesheet" href="./inject/css/0-style.css"><script src="./inject/script/0-header.js"></script><meta name="description" content="Python&apos;s set data structure for JavaScript"><meta property="twitter:card" content="summary"><meta property="twitter:title" content="@collection-abstraction/set"><meta property="twitter:description" content="Python&apos;s set data structure for JavaScript"></head>
<body class="layout-container" data-ice="rootContainer">

<header>
  <a href="./">Home</a>
  <a href="./manual/index.html" data-ice="manualHeaderLink">Manual</a>
  <a href="identifiers.html">Reference</a>
  <a href="source.html">Source</a>
  
  <div class="search-box">
  <span>
    <img src="./image/search.png">
    <span class="search-input-edge"></span><input class="search-input"><span class="search-input-edge"></span>
  </span>
    <ul class="search-result"></ul>
  </div>
<a style="position:relative; top:3px;" href="https://github.com/collection-abstraction/set"><img width="20px" src="./image/github.png"></a></header>

<nav class="navigation" data-ice="nav"><div>
  <ul>
    
  <li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-_Set">_Set</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-_set">_set</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-Set">Set</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-set">set</a></span></span></li>
</ul>
</div>
</nav>

<div class="content" data-ice="content"><h1 data-ice="title">src/_Set.js</h1>
<pre class="source-code line-number raw-source-code"><code class="prettyprint linenums" data-ice="content">import {KeyError} from &apos;@failure-abstraction/error&apos;;

export default function _Set(BaseSet) {
	/* eslint-disable no-use-extend-native/no-use-extend-native */
	const Set = function (iterable = null) {
		this.container = new BaseSet(iterable);
	};

	Set.wrap = function (A) {
		if (A instanceof Set) return A;

		return new Set(A);
	};

	Set._operator = function (method) {
		return function (...args) {
			return method.apply(this, Array.from(args, Set.wrap));
		};
	};

	Set._inclusion = function (A, B) {
		return A._ispropersubset(B) ? -1 : B._ispropersubset(A) ? 1 : 0;
	};

	Set.inclusion = Set._operator(Set._inclusion);

	// eslint-disable-next-line no-multi-assign
	Set.prototype[Symbol.iterator] = Set.prototype.keys = function* () {
		yield* this.container;
	};

	Set.prototype.len = function () {
		return this.container.size;
	};

	Set.prototype.has = function (key) {
		return this.container.has(key);
	};

	Set.prototype._isdisjoint = function (other) {
		return this._commonkeys(other).next().done;
	};

	Set.prototype.isdisjoint = Set._operator(Set.prototype._isdisjoint);

	Set.prototype._isequal = function (other) {
		return this._issubset(other) &amp;&amp; other._issubset(this);
	};

	Set.prototype.isequal = Set._operator(Set.prototype._isequal);

	Set.prototype._issubset = function (other) {
		if (this.len() &gt; other.len()) return false;

		for (const key of this) if (!other.has(key)) return false;

		return true;
	};

	Set.prototype.issubset = Set._operator(Set.prototype._issubset);

	Set.prototype._ispropersubset = function (other) {
		return this._issubset(other) &amp;&amp; !this._issuperset(other);
	};

	Set.prototype.ispropersubset = Set._operator(Set.prototype._ispropersubset);

	Set.prototype._issuperset = function (other) {
		return other._issubset(this);
	};

	Set.prototype.issuperset = Set._operator(Set.prototype._issuperset);

	Set.prototype._ispropersuperset = function (other) {
		return this._issuperset(other) &amp;&amp; !this._issubset(other);
	};

	Set.prototype.ispropersuperset = Set._operator(
		Set.prototype._ispropersuperset,
	);

	// eslint-disable-next-line no-multi-assign
	Set.prototype.union = Set.prototype._union = function (...others) {
		return this.copy()._update(...others);
	};

	Set.prototype._commonkeys = function* (...others) {
		// eslint-disable-next-line no-labels
		keys: for (const key of this) {
			for (const other of others) {
				// eslint-disable-next-line no-labels
				if (!other.has(key)) continue keys;
			}

			yield key;
		}
	};

	Set.prototype._intersection = function (...others) {
		return new Set(this._commonkeys(...others));
	};

	Set.prototype.intersection = Set._operator(Set.prototype._intersection);

	// eslint-disable-next-line no-multi-assign
	Set.prototype.difference = Set.prototype._difference = function (...others) {
		return this.copy()._difference_update(...others);
	};

	// eslint-disable-next-line no-multi-assign
	Set.prototype.symmetric_difference = Set.prototype._symmetric_difference =
		function (other) {
			return this.copy()._symmetric_difference_update(other);
		};

	Set.prototype.copy = function () {
		return new Set(this);
	};

	// eslint-disable-next-line no-multi-assign
	Set.prototype.update = Set.prototype._update = function (...others) {
		for (const other of others) {
			for (const key of other) this.add(key);
		}

		return this;
	};

	Set.prototype._intersection_update = function (...others) {
		const intersection = this._intersection(...others);

		this.clear().update(intersection);

		return this;
	};

	Set.prototype.intersection_update = Set._operator(
		Set.prototype._intersection_update,
	);

	// eslint-disable-next-line no-multi-assign
	Set.prototype.difference_update = Set.prototype._difference_update =
		function (...others) {
			for (const other of others) {
				for (const key of other) this.discard(key);
			}

			return this;
		};

	Set.prototype.symmetric_difference_update =
		// eslint-disable-next-line no-multi-assign
		Set.prototype._symmetric_difference_update = function (other) {
			for (const key of other) {
				if (this.has(key)) this.discard(key);
				else this.add(key);
			}

			return this;
		};

	Set.prototype.add = function (key) {
		this.container.add(key);

		return this;
	};

	Set.prototype.remove = function (key) {
		if (!this.container.delete(key)) throw new KeyError();

		return this;
	};

	Set.prototype.discard = function (key) {
		this.container.delete(key);

		return this;
	};

	Set.prototype.pop = function () {
		if (this.len() === 0) throw new KeyError();

		const key = this.keys().next().value;

		this.discard(key);

		return key;
	};

	Set.prototype.clear = function () {
		this.container.clear();

		return this;
	};

	return Set;
	/* eslint-enable no-use-extend-native/no-use-extend-native */
}
</code></pre>

</div>

<footer class="footer">
  Generated by <a href="https://esdoc.org">ESDoc<span data-ice="esdocVersion">(1.1.0)</span><img src="./image/esdoc-logo-mini-black.png"></a>
</footer>

<script src="script/search_index.js"></script>
<script src="script/search.js"></script>
<script src="script/pretty-print.js"></script>
<script src="script/inherited-summary.js"></script>
<script src="script/test-summary.js"></script>
<script src="script/inner-link.js"></script>
<script src="script/patch-for-local.js"></script>
</body>
</html>
